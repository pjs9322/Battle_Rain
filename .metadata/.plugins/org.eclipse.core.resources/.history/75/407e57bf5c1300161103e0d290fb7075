package view;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;

import javax.swing.JFrame;
import javax.swing.JPanel;

import display_Set.display_Set;

public class display extends JFrame implements Runnable {
	private static final long serialVersionUID = 1L;

	public static enum STATE {
		Login, Wait, Room, Playing
	}

	private STATE state = STATE.Login;

	public display_Set display_Set;
	
	private Thread thread;
	
	public void setState(STATE state) {
		this.state = state;
	}
	
	public display() {				// 생성자 작성
//		display_Set = new display_Set();
//		this.add(display_Set);
		
		thread = new Thread(this);	// 스레드 생성
		thread.start();				// 스레드 실행

		this.setTitle("한글 께임");		// 프레임의 이름 지정
		this.setSize(1280, 720); 	// 프레임 사이즈 지정
		this.setVisible(true);		// 가시화 옵션 설정
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // 창 종료시 프로그램 종료
	}
	
	private Toolkit toolkit = Toolkit.getDefaultToolkit();

	private Image buff_Image;						// 더블 버퍼링용 버퍼 이미지
	private Graphics buff_Graphics;					// 더블 버퍼링용 버퍼 그래픽

	public void paint(Graphics g) {					// 프레임이 생성되면 자동으로 그림이 그려진다.
		this.draw(g);								// 새로 그린다.
	}

	public void update_Display(Graphics g) {		// 이미지 갱신 품질을 고려하여 더블 버퍼링 기법을 사용
		Draw_Display(g);								// 그림 데이터를 전송
		g.drawImage(buff_Image, 0, 0, this);		// 드로잉 작업이 완전히 종료되면 기존 이미지와 교체한다.
	}

	public void Draw_Display(Graphics g) {
		buff_Graphics.clearRect(0, 0, 1280, 720);	// 프레임 전체 사이즈만큼의 전체 이미지 지우기
	}

	private void draw(Graphics g) {
		// TODO Auto-generated method stub
		g.drawImage(toolkit.getImage("rsc/시작_화면.gif"), 0, 0, this);
	}
	
	@Override
	public void run() {
		// TODO Auto-generated method stub
		try {
			while (true) {
				// 현재 state에 따라 보여주는 display가 달라진다.
				Thread.sleep(50);
				// 50 milli sec 주기로 갱신
				repaint();
				// 갱신된 데이터에 따라 이미지 새로 그리기
			}
		} catch (Exception e) {}
		// 에러상황 발생을 가정한 try문이므로 모든 에러에 대해 아무것도 하지 않음
	}
}
