package control;

import java.io.IOException;

import main.constant.STATE;
import model.Room_Model;
import model.User_Model;

public class control {

	private Room_Model room;
	private User_Model user;
	
	private STATE next_State = STATE.Login;
	public STATE getNext_State() { return next_State; }
	public void setNext_State(STATE state) { this.next_State = state; }
	
	public control() {
		this.room = new Room_Model();
		this.user = new User_Model();
	}
	
	public void user_Login(String userID, String password) {
		try {
			if (this.user.user_Login(userID, password)) {
				this.next_State = STATE.Wait;
			}
		} catch (ClassNotFoundException | IOException e) {}
	}
	
	public void user_Logout() {
		if (this.next_State == STATE.Wait) {
			this.next_State = STATE.Login;
		}
	}

	public void user_Join(String userID, String password) {
		try {
			this.user.user_Join(userID, password);
		} catch (ClassNotFoundException | IOException e) {}
	}

	public boolean Room_Make(String roomName) {
		if (this.next_State == STATE.Wait) {
			try {
				if (this.room.Room_Make(roomName)) {
					this.next_State = STATE.Room;
					return true;
				}
			} catch (ClassNotFoundException | IOException e) {}
			return false;
		} else {
			return true;
		}
	}
	
	public void game_Start() {
		this.next_State = STATE.Playing;
	}
	public void Room_Search(String text) {
		// TODO Auto-generated method stub
		
	}
}
